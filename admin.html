<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Wedding Ian & Riri</title>

    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon.ico" />

    <link
      rel="preload"
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      as="style"
      onload="
        this.onload = null;
        this.rel = 'stylesheet';
      "
    />
    <noscript>
      <link
        href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
        rel="stylesheet"
    /></noscript>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Dynalight&family=Cookie&family=Work+Sans:wght@100;300;400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- simplyCountdown -->
    <link
      rel="stylesheet"
      href="assets/countdown/simplyCountdown.theme.default.css"
    />
    <script src="assets/countdown/simplyCountdown.min.js"></script>

    <!-- Bootstrap Icons -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
    />

    <!-- AOS -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />

    <!-- Sweet Alert -->
    <link rel="stylesheet" href="assets/sweetalert2/sweetalert2.min.css" />

    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div id="admin-panel" style="display: none; margin-top: 40px">
      <h4>Bulk Link Generator</h4>

      <textarea
        id="bulkNama"
        rows="6"
        placeholder="Satu nama per baris"
      ></textarea>

      <select id="bulkPronoun">
        <option value="auto">Auto</option>
        <option value="Bapak">Bapak</option>
        <option value="Ibu">Ibu</option>
        <option value="Saudara/i">Saudara/i</option>
      </select>

      <button onclick="generateBulk()">Generate</button>
      <button onclick="copyAll()">Copy All</button>

      <textarea id="hasilBulk" rows="10" readonly></textarea>
    </div>

    <script>
      // ADMIN MODE
      if (new URLSearchParams(window.location.search).get("admin") === "1") {
        document.getElementById("admin-panel").style.display = "block";
      }

      function detectPronoun(name) {
        const n = name.toLowerCase();
        if (n.startsWith("pak ") || n.startsWith("bpk ")) return "Bapak";
        if (n.startsWith("bu ") || n.startsWith("ibu ")) return "Ibu";
        return "Saudara/i";
      }

      function generateBulk() {
        const raw = document.getElementById("bulkNama").value.trim();
        if (!raw) return alert("Masukkan nama");

        const pronounMode = document.getElementById("bulkPronoun").value;
        const baseUrl = window.location.origin + window.location.pathname;

        const names = raw
          .split("\n")
          .map((n) => n.trim())
          .filter(Boolean);

        const result = names
          .map((name) => {
            const p =
              pronounMode === "auto" ? detectPronoun(name) : pronounMode;
            const link = `${baseUrl}?n=${encodeURIComponent(name)}&p=${encodeURIComponent(p)}`;

            return `${p} ${name}
${link}`;
          })
          .join("\n\n");

        document.getElementById("hasilBulk").value = result;
      }

      function copyAll() {
        const text = document.getElementById("hasilBulk").value;
        navigator.clipboard.writeText(text);
        alert("Semua link berhasil dicopy!");
      }
    </script>
  </body>
</html>
